<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reserva - Lagoa Azul | Trilheiros</title>
  <style>
    :root{--accent:#0ea5a0;--bg:#fbfbfb;--card:#fff}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;line-height:1.5;background:var(--bg);color:#0b1220;margin:0;padding:24px}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px}
    h1{font-size:28px;margin:0}
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(12,18,26,0.06);padding:18px;margin-top:18px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    label{display:block;margin:8px 0 6px;font-weight:600}
    input[type=number],select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ee}
    button{background:var(--accent);color:#fff;border:0;padding:12px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    .muted{color:#536070;font-size:14px}
    .meta{display:flex;gap:12px;flex-wrap:wrap}
    .pill{background:#eef7f6;padding:8px 10px;border-radius:999px;font-weight:700}
    .soldout{background:#ffdede;color:#9b1b1b;padding:10px;border-radius:8px}
    .small{font-size:13px}
    .footer{margin-top:18px;font-size:13px;color:#425165}
    .countdown{display:flex;gap:10px}
    .countdown span{background:#fff;padding:10px;border-radius:8px;min-width:56px;text-align:center;font-weight:700}
    .items-list{display:flex;flex-direction:column;gap:6px;margin-top:6px}
    .note{background:#fffbe6;padding:10px;border-radius:8px}
    .total{font-size:20px;font-weight:800;margin-top:8px}
    .danger{color:#a91b1b}
    @media(max-width:880px){.grid{grid-template-columns:1fr;}.card{padding:14px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="https://imgur.com/e2c5e929-cdb2-4f42-89e4-dcebdff79881" alt="Logo Trilheiros" style="width:80px;height:80px;border-radius:12px;object-fit:cover">
      <img src="" alt="Lagoa Azul" id="heroImg" src="https://i.imgur.com/aZCi6df.jpeg" alt="Lagoa Azul" style="width:86px;height:86px;border-radius:10px;object-fit:cover">
      <div>
        <h1>Dia de viver a magia da Lagoa Azul! üíô‚ú®</h1>
        <div class="muted">21 de dezembro de 2025 ‚Ä¢ Primavera do Leste, MT</div>
      </div>
    </header>

    <div class="card grid">
      <section>
        <h3>Sobre o passeio</h3>
        <p>Rumo √† Primavera do Leste para aproveitar √°guas cristalinas, natureza e muita energia boa. Um dia perfeito para relaxar, renovar as energias e encerrar o ano com uma experi√™ncia inesquec√≠vel.</p>

        <div class="card">
          <strong>Incluso no passeio</strong>
          <div class="items-list">
            <div>üöê Transporte ida e volta</div>
            <div>ü§ø Snorkel</div>
            <div>ü¶∫ Colete salva-vidas</div>
            <div>üõ°Ô∏è Seguro de vida</div>
            <div>üòÑ Muita divers√£o e aventura</div>
          </div>
        </div>

        <div style="margin-top:10px">
          <strong>Valores</strong>
          <ul>
            <li>R$ 332,00 ‚Äî Adulto (com transporte)</li>
            <li>R$ 282,00 ‚Äî Crian√ßa at√© 10 anos</li>
            <li>R$ 220,00 ‚Äî Por pessoa (ve√≠culo pr√≥prio)</li>
            <li>R$ 339,00 ‚Äî Cart√£o de cr√©dito (por pessoa)</li>
          </ul>
        </div>

        <div style="margin-top:10px">
          <strong>Contador do passeio</strong>
          <div style="display:flex;align-items:center;gap:12px;margin-top:8px">
            <div class="pill">üî¢ Vagas totais: <strong id="totalSpots">28</strong></div>
            <div class="pill">‚úÖ Reservadas: <strong id="reservedCount">0</strong></div>
            <div class="pill">üéüÔ∏è Restantes: <strong id="remainingCount">28</strong></div>
          </div>

          <div style="margin-top:10px" class="countdown small">
            <div>Contagem regressiva:</div>
            <div id="countdownBlocks" class="countdown"></div>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <strong>Fa√ßa sua reserva</strong>
          <div class="muted small">Escolha quantas vagas ‚Äî o bot√£o ir√° bloquear automaticamente quando as 28 vagas forem preenchidas.</div>

          <label>Adultos (com transporte) ‚Äî R$ 332,00</label>
          <input id="adults" type="number" min="0" max="10" value="1">

          <label>Crian√ßas at√© 10 anos ‚Äî R$ 282,00</label>
          <input id="children" type="number" min="0" max="10" value="0">

          <label>Pessoas com ve√≠culo pr√≥prio ‚Äî R$ 220,00</label>
          <input id="vehicleOwn" type="number" min="0" max="10" value="0">

          <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
            <div class="muted">Meio de pagamento:</div>
            <select id="paymentMethod">
              <option value="pix">PIX (trilheiros.roomt)</option>
              <option value="card">Cart√£o de cr√©dito</option>
            </select>
          </div>

          <label>Nome completo do respons√°vel pela reserva</label>
<input id="clientName" type="text" placeholder="Digite seu nome" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ee">

<div class="total" id="totalDisplay">Total: R$ 332,00</div>

<div id="cardHighlight" style="position:sticky;top:10px;margin-top:12px;padding:18px;border-radius:14px;background:linear-gradient(135deg,#fff7d1,#ffe59e);border:2px solid #ffdb70;display:none;text-align:center;font-weight:800;font-size:20px;z-index:20;box-shadow:0 4px 12px rgba(0,0,0,0.18);animation:pulseGlow 2s infinite">
  üí≥ Valor para pagamento no cart√£o<br>
  <span id="cardValue" style="font-size:28px;color:#8a5d00"></span>
  <br>
  <button id="copyCardValue" style="margin-top:14px;padding:10px 16px;border-radius:10px;border:0;background:#8a5d00;color:white;font-weight:700;font-size:15px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,0.25)">üìã Copiar valor</button>
  <div id="cardWarning" style="margin-top:10px;color:#b80000;font-size:15px;display:none;font-weight:700">‚ö†Ô∏è Para mais de 2 vagas, fale com Jonatas para gerar link do cart√£o</div>
</div>
<style>
@keyframes pulseGlow{0%{box-shadow:0 0 6px #ffe08a;}50%{box-shadow:0 0 18px #ffcf52;}100%{box-shadow:0 0 6px #ffe08a;}}
</style>
</div>

          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
            <button id="btnPix">Pagar via PIX (copiar chave)</button>
            <button id="btnCard">Pagar com cart√£o</button>
            <button id="btnConfirm">Confirmar reserva (simula√ß√£o)</button>
<button id="btnSendWhats">Enviar reserva pelo WhatsApp</button>
          </div>

          <div id="paymentNote" class="muted small" style="margin-top:8px"></div>

<button id="btnWhatsJonatas" style="margin-top:10px;background:#25D366">Falar com Jonatas no WhatsApp</button>

          <div id="soldOutMessage" style="margin-top:10px"></div>
        </div>

      </section>

      <aside>
        <div class="card">
          <strong>Resumo r√°pido</strong>
          <div style="margin-top:8px">
            <div>Adultos: <span id="sumAdults">1</span></div>
            <div>Crian√ßas: <span id="sumChildren">0</span></div>
            <div>Ve√≠culo pr√≥prio: <span id="sumVehicle">0</span></div>
            <div class="total" id="sumTotal">R$ 332,00</div>
          </div>

          <div style="margin-top:12px" class="note">
            <strong>Aten√ß√£o</strong>
            <div class="small" style="margin-top:6px">- Para pagamentos no cart√£o com mais de 2 reservas, fale com o Jonatas para gerar um link espec√≠fico.</div>
            <div class="small">- Esta vers√£o salva reservas localmente no navegador (simula√ß√£o). Para funcionar entre v√°rios dispositivos √© necess√°rio integrar um banco (ex: Firebase) ‚Äî posso te ajudar com isso.</div>
          </div>

          <div style="margin-top:10px">
            <strong>Contato</strong>
            <div class="small">WhatsApp: <a href="https://wa.me/5566996926174" target="_blank">(66) 99962-6174</a></div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>Link de cart√£o</strong>
          <div style="margin-top:8px"><a id="mpagoLink" href="https://mpago.li/21wuNLV" target="_blank">Pagar com cart√£o (Mercado Pago)</a></div>

          <div style="margin-top:12px">
            <strong>Chave PIX</strong>
            <div style="margin-top:6px">trilheiros.roomt</div>
          </div>
        </div>

      </aside>
    </div>

    <div class="footer">Feito com carinho ‚Äî Jonatas Trilheiros. ‚ö°Ô∏è</div>
  </div>

  <script>
    // Inicializa√ß√£o
    const TOTAL = 10;
    const KEY = 'lagoa_reserved_count_v1';
    const reserved = Number(localStorage.getItem(KEY) || 0);
    document.getElementById('totalSpots').innerText = TOTAL;
    document.getElementById('reservedCount').innerText = reserved;
    document.getElementById('remainingCount').innerText = Math.max(0, TOTAL - reserved);

    // Elementos
    const adultsIn = document.getElementById('adults');
    const childrenIn = document.getElementById('children');
    const vehicleIn = document.getElementById('vehicleOwn');
    const sumAdults = document.getElementById('sumAdults');
    const sumChildren = document.getElementById('sumChildren');
    const sumVehicle = document.getElementById('sumVehicle');
    const sumTotal = document.getElementById('sumTotal');
    const totalDisplay = document.getElementById('totalDisplay');
    const btnPix = document.getElementById('btnPix');
    const btnCard = document.getElementById('btnCard');
    const btnConfirm = document.getElementById('btnConfirm');
    const paymentMethod = document.getElementById('paymentMethod');
    const paymentNote = document.getElementById('paymentNote');
    const mpagoLink = document.getElementById('mpagoLink');
    const soldOutMessage = document.getElementById('soldOutMessage');

    // Pre√ßo
    const PRICE_ADULT_PIX = 332.00;
    const PRICE_CHILD_PIX = 282.00;
    const PRICE_VEHICLE = 220.00;
    const PRICE_CARD = 339.00;

    function currencyBR(num){
      return num.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
    }

    function calc(){
      const a = Number(adultsIn.value||0);
      const c = Number(childrenIn.value||0);
      const v = Number(vehicleIn.value||0);
      sumAdults.innerText = a;
      sumChildren.innerText = c;
      sumVehicle.innerText = v;
      const totalPix = (a * PRICE_ADULT_PIX) + (c * PRICE_CHILD_PIX) + (v * PRICE_VEHICLE);
      const totalCard = (a + c + v) * PRICE_CARD;
      const totalTickets = a + c + v;
      const method = paymentMethod.value;
      sumTotal.innerText = currencyBR(method === 'pix' ? totalPix : totalCard);
      totalDisplay.innerText = 'Total: ' + currencyBR(method === 'pix' ? totalPix : totalCard);

      // payment rules
      if(method === 'card' && totalTickets > 2){
        paymentNote.innerText = 'Para pagamentos no cart√£o com mais de 2 reservas, fale com o Jonatas para gerar um novo link.';
      } else {
        paymentNote.innerText = '';
      }

      // enable/disable card link
      if(method === 'card' && totalTickets > 2){
        btnCard.disabled = true;
      } else {
        btnCard.disabled = false;
      }

      // check seats availability
      const currentReserved = Number(localStorage.getItem(KEY) || 0);
      if(currentReserved >= TOTAL){
        disableAllSoldOut();
      } else {
        enableIfSpace();
      }

      document.getElementById('cardHighlight').style.display = method==='card' ? 'block' : 'none';
      document.getElementById('cardValue').innerText = currencyBR(method==='card'? totalCard : 0);
      return {totalPix, totalCard, totalTickets};
    }

    function enableIfSpace(){
      soldOutMessage.innerHTML = '';
      btnConfirm.disabled = false;
      btnPix.disabled = false;
      btnCard.disabled = false;
    }
    function disableAllSoldOut(){
      soldOutMessage.innerHTML = '<div class="soldout">üö´ Vagas esgotadas</div>';
      btnConfirm.disabled = true;
      btnPix.disabled = true;
      btnCard.disabled = true;
    }

    // Attach events
    [adultsIn,childrenIn,vehicleIn,paymentMethod].forEach(el=>el.addEventListener('input',calc));
    window.addEventListener('load',calc);

    // Bot√£o falar com Jonatas
const btnWhatsJonatas = document.getElementById('btnWhatsJonatas');
btnWhatsJonatas.addEventListener('click', ()=>{
  window.open('https://wa.me/5566996926174','_blank');
});

// copiar valor do cart√£o
const btnCopyCard = document.getElementById('copyCardValue');
btnCopyCard?.addEventListener('click', ()=>{
  const v = document.getElementById('cardValue').innerText;
  navigator.clipboard.writeText(v).then(()=>alert('Valor copiado: ' + v));
});

// PIX button - copia chave e abre instru√ß√µes
    btnPix.addEventListener('click', ()=>{
      const {totalPix, totalTickets} = calc();
      if(totalTickets <= 0){ alert('Escolha ao menos 1 vaga.'); return; }
      // copy chave PIX
      navigator.clipboard?.writeText('trilheiros.roomt').then(()=>{
        alert('Chave PIX copiada: trilheiros.roomt\n\nAbra seu app e cole a chave. Valor: ' + currencyBR(totalPix));
      }).catch(()=>{
        prompt('Copie a chave PIX', 'trilheiros.roomt');
      });
    });

    // Card button - abre link or shows contact message
    btnCard.addEventListener('click', ()=>{
      const {totalTickets, totalPix} = calc();
      if(totalTickets <= 0){ alert('Escolha ao menos 1 vaga.'); return; }
      const total = totalPix; // mostrar o total para pessoa pagar
      alert('Voc√™ ser√° redirecionado para o link do cart√£o. Valor a pagar: ' + currencyBR(total));
      window.open('https://link.mercadopago.com.br/trilheirosderoo', '_blank');
    });('click', ()=>{
      const {totalTickets} = calc();
      if(totalTickets <= 0){ alert('Escolha ao menos 1 vaga.'); return; }
      if(totalTickets > 2){
        alert('Reservas maiores que 2 pessoas no cart√£o: fale com o Jonatas para gerar link.\nWhatsApp: (66) 99962-6174');
        window.open('https://wa.me/5566996926174', '_blank');
        return;
      }
      window.open(mpagoLink.href, '_blank');
    });

    // WhatsApp enviar
const btnSendWhats = document.getElementById('btnSendWhats');
btnSendWhats.addEventListener('click', () => {
  const name = document.getElementById('clientName').value.trim();
  const { totalTickets, totalPix } = calc();
  if(!name){ alert('Digite seu nome.'); return; }
  if(totalTickets <= 0){ alert('Escolha ao menos 1 vaga.'); return; }
  const msg = `Ol√°, segue minha reserva para Lagoa Azul:%0A‚Ä¢ Nome: ${name}%0A‚Ä¢ Vagas: ${totalTickets}%0A‚Ä¢ Valor: ${currencyBR(totalPix)}%0A‚Ä¢ Comprovante em anexo.`;
  window.open(`https://wa.me/5566996926174?text=${msg}`, '_blank');
});

// Confirm reservation (simula√ß√£o): decrementa vagas e salva no localStorage
    btnConfirm.addEventListener('click', ()=>{
      const {totalTickets, totalPix} = calc();
      if(totalTickets <= 0){ alert('Escolha ao menos 1 vaga.'); return; }
      let current = Number(localStorage.getItem(KEY) || 0);
      if(current + totalTickets > TOTAL){
        alert('N√£o h√° vagas suficientes. Restam ' + (TOTAL - current) + ' vagas.');
        return;
      }
      current += totalTickets;
      localStorage.setItem(KEY, current);
      document.getElementById('reservedCount').innerText = current;
      document.getElementById('remainingCount').innerText = Math.max(0, TOTAL - current);

      // save detalhes simples
      const reservations = JSON.parse(localStorage.getItem('lagoa_reservas_list_v1') || '[]');
      const id = 'R' + Date.now();
      reservations.push({id, adults: Number(adultsIn.value), children: Number(childrenIn.value), vehicle: Number(vehicleIn.value), totalTickets, totalPix, date: new Date().toISOString()});
      localStorage.setItem('lagoa_reservas_list_v1', JSON.stringify(reservations));

      alert('Reserva registrada (simula√ß√£o). ID: ' + id + '\nTotal: ' + currencyBR(totalPix) + '\nUse o bot√£o PIX para copiar a chave e concluir o pagamento.');
      calc();
    });

    // Countdown
    function startCountdown(targetDate){
      const target = new Date(targetDate).getTime();
      const container = document.getElementById('countdownBlocks');
      function tick(){
        const now = Date.now();
        const diff = Math.max(0, target - now);
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
        container.innerHTML = `<span>${days}d</span><span>${hours}h</span><span>${minutes}m</span><span>${seconds}s</span>`;
        if(diff<=0) clearInterval(timer);
      }
      tick();
      const timer = setInterval(tick,1000);
    }
    startCountdown('2025-12-21T06:00:00');

    // Show existing reservations count on load
    document.getElementById('reservedCount').innerText = Number(localStorage.getItem(KEY) || 0);
    document.getElementById('remainingCount').innerText = Math.max(0, TOTAL - Number(localStorage.getItem(KEY) || 0));

    // If sold out at load
    if(Number(localStorage.getItem(KEY) || 0) >= TOTAL) disableAllSoldOut();
  </script>
</body>
</html>
